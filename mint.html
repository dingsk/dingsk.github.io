<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
  
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="description" content="Neoh">
<meta name="author" content="Frenify">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<title>MetaEfi</title>

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Heebo:wght@100;200;300;400;500;600;700;800;900&family=Nunito:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
<!-- !Google Fonts -->

<!-- Styles -->
<link type="text/css" rel="stylesheet" href="css/plugins.css" />
<link type="text/css" rel="stylesheet" href="css/style.css?ver=2.0" />
<!--[if lt IE 9]> <script type="text/javascript" src="js/modernizr.custom.js"></script> <![endif]-->
<!-- !Styles -->

</head>

<body class="home-static">


<!-- Main -->
<div class="neoh_fn_main" data-footer-sticky="">
	<!-- Header -->
	<header class="neoh_fn_header">
		<div class="container">
			<div class="header_in">
			
				<div class="logo">
					<a href="index.html"><img src="img/logo.png" alt=""></a>
				</div>
				
				<div class="rtBtn">
					<a href="javascript:void(0);" class="neoh_fn_button" style="padding: 0 12px 0 64px;">
						<span class="icon"><img src="img/metamask.png" alt="" class="fn__svg"></span>
						<span class="text" style="font-size: 12px;">Connect Wallet</span>
					</a>

					<a href="javascript:void(0);" class="neoh_fn_button" style="padding-left: 120px;text-transform: none;">
						<span class="icon"><span class="fn__svg" style="width:auto;line-height: 22px;font-size: 12px;">1 RopstenETH</span></span>
						<span target="_blank" href='' class="text" alt="" style="color: inherit;">0x506c...0eec</span>
					</a>
				</div>
				
			</div>
		</div>
	</header>
	<!-- !Header -->
	

	<!-- Content -->
	<div class="neoh_fn_content">

		<!-- About Section -->
		<section id="about">
			<div class="container">
				
				<!-- About Item #1 -->
				<div class="neoh_fn_about_item">
					<div class="img_item">
						<img src="img/2.jpeg" alt="">
					</div>
					<div class="content_item">
						
						<div class="neoh_fn_title" data-align="left">
							<h3 class="fn_title">Project Goldrush</h3>
							<div class="line"><span></span></div>
						</div>
						
						<div class="desc">
							<p>The first cross-chain mint NFT project using the latest protocol – anyCall, empowered by Multichain.</p>
							<p>NFTs endorsed by the future profit of real asset not only guarantee its value but unleashes multi-layer benefits via digital twin metaverse and community token.</p>
						</div>
						
						<div class="buttons">
							<a href="javascript:void(0);" class="neoh_fn_button">
								<span class="icon"><img src="img/chu.png" alt="" class="fn__svg" style="opacity: 1"></span>
								<span class="text">mint(coming soon)</span>
							</a>
						</div>
						<a target="_blank" href='' id="mint_hash" style="color: inherit;"></a>
					</div>
				</div>
				<!-- !About Item #1 -->
				
			</div>
		</section>
		<!-- !About Section -->
	
	</div>
	<!-- Content -->
	
	<!-- Footer -->
	<footer id="footer">
		<div class="neoh_fn_footer">
		
			<!-- Footer Top -->
			<div class="footer_top">
				<div class="container">
					<div class="ft_in">
					
						<div class="desc">
							<div class="img">
								<img src="img/logo.png" alt="">
							</div>
							<h3 class="fn_title">The Future is NOW</h3>
							<p class="fn_desc">Together we will witness the seamless integration<br>between the real and the digital.</p>
						</div>
						
						<div class="neoh_fn_social_list">
							<ul>
								<li><a href="#"><i class="fn-icon-twitter"></i></a></li>
								<li><a href="#"><i class="fn-icon-linkedin"></i></a></li>
								<li><a href="#"><img src="img/medium-white.44739b39.svg"></a></li>
							</ul>
						</div>
						
					</div>
				</div>
			</div>
			<!-- !Footer Top -->
			
			<!-- Footer Bottom -->
			<div class="footer_bottom">
				<div class="container">
					<!-- <div class="fb_in"> -->
						
						<div class="fb_left">
							<p style="text-align: center;">Copyright 2022 @Designed & Developed by  <a href="#" target="_blank">MetaEfi</a></p>
						</div>
						
						<!-- <div class="fb_right">
							<ul>
								<li><a href="#">Terms &amp; Conditions</a></li>
							</ul>
						</div> -->
						
					<!-- </div> -->
				</div>
			</div>
			<!-- !Footer Bottom -->
			
		</div>
	</footer>
	<!-- !Footer -->
	
	<!-- Totop -->
	<a href="#" class="neoh_fn_totop">
		<span class="arrow"><img src="svg/right-arr.svg" alt="" class="fn__svg"></span>
		<span class="circle"><img src="svg/circle.svg" alt="" class="fn__svg"></span>
	</a>
	<!-- !Totop -->
	 
	
</div>
<!-- !Main -->

<!-- Scripts -->
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/plugins.js"></script>
<!--[if lt IE 10]> <script type="text/javascript" src="js/ie8.js"></script> <![endif]-->
<script type="text/javascript" src="js/init.js?ver=2.0"></script>
<!-- !Scripts -->
<script type="text/javascript" src="js/web3.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/merkletreejs@latest/merkletree.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/keccak256@latest/keccak256.js"></script>
<script type="text/javascript">
	const chainConfig = {
		'1': {
			'symbol': 'ETH',
			'name': 'Ethereum',
			'decimals': 18,
			'lookHash': 'https://etherscan.io' + '/tx/',
        	'lookAddr': 'https://etherscan.io' + '/address/',
		},
		'3': {
			'symbol': 'RopstenETH',
			'name': 'Ropsten',
			'decimals': 18,
			'lookHash': 'https://ropsten.etherscan.io' + '/tx/',
        	'lookAddr': 'https://ropsten.etherscan.io' + '/address/',
		},
		'1337': {
			'symbol': 'testETH',
			'name': 'test',
			'decimals': 18,
			'lookHash': 'https://ropsten.etherscan.io' + '/tx/',
        	'lookAddr': 'https://ropsten.etherscan.io' + '/address/',
		}
	},
	whileList = [
		'0xE4345a10d0A9033255176A7A571CdEdeA8812aA8',
		'0xE289d8A3Deff0c5951B7F20409fc7296Bcb47922',
		'0x506c1F919f5234fc374503dA03229b20041a0Eec',
		'0xE4345a10d0A9033255176A7A571CdEdeA8812aA8'
	],
	freeList = [
		'0xE4345a10d0A9033255176A7A571CdEdeA8812aA8',
		'0xE289d8A3Deff0c5951B7F20409fc7296Bcb47922',
		'0x506c1F919f5234fc374503dA03229b20041a0Eec',
		'0xE4345a10d0A9033255176A7A571CdEdeA8812aA8'
	],
	goldrushAbi = [{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"MINT_PRICE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"WHITE_MINT_PRICE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"baseURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"freeClaimed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"bytes32[]","name":"_proof","type":"bytes32[]"}],"name":"freeMint","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"freeMintRoot","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"bytes32[]","name":"_proof","type":"bytes32[]"}],"name":"mint","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_root","type":"bytes32"}],"name":"setFreeMintRoot","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"setPaused","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_root","type":"bytes32"}],"name":"setWhiteListRoot","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"unpaused","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"whiteListClaimed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"whiteListRoot","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}],
    goldrushAddress = "0x43031e615496Ef54Dc7D6e46580ecac4b330acC2",
	merkleTree = function(leaves, address) {
		let tree = new MerkleTree(leaves, keccak256, {sortLeaves:true})
        let root = tree.getRoot().toString('hex')
        let leaf = keccak256(address)
        let proof = tree.getProof(leaf)
		return [proof, tree.verify(proof, leaf, root)]
	},
	getProofAndValue = async function(address) {
		let [proof, bool] = merkleTree(freeList, address)
		if (bool) {
			bool = await window.goldRush.methods.freeClaimed(address).call()
			if (!bool) {
				return [proof, 0]
			}
		}
		[proof, bool] = merkleTree(whileList, address)
		if (bool) {
			bool = await window.goldRush.methods.whiteListClaimed(address).call()
			if (!bool) {
				return [proof, 0.3e18]
			}
		}
		return [proof, 0.4e18]
	},
	// 回调
	handleAccountsChanged = async function(accounts) {
		if (!accounts.length) {
			removeListener()
			window.curWallet = undefined
			$(".rtBtn .neoh_fn_button:first").addClass('active')
			$(".rtBtn .neoh_fn_button:last").removeClass('active')
			return
		}
		let address = accounts[0]
		$(".rtBtn .neoh_fn_button:first").removeClass('active')
		$(".rtBtn .neoh_fn_button:last").addClass('active')
		window.curWallet.address = address
		window.curWallet.proofAndValue = await getProofAndValue(address)
		handleChainChanged()
	},
	handleDisconnect = function(e) {
		handleAccountsChanged([])
	},
	handleChainChanged = async function(chainId) {
		chainId = chainId ? parseInt(chainId, 16) : (await window.web3.eth.getChainId())
		window.curWallet.chainId = chainId
		let chain = chainConfig[chainId]
		let address = window.curWallet.address
		let coin = (await window.web3.eth.getBalance(address)) / 10**chain?.decimals
		window.curWallet.coin = coin
		$(".rtBtn .neoh_fn_button:last .text").text(address.slice(0,6)+'...'+address.slice(-4)).attr('href', chain?.lookAddr + address)
		$(".rtBtn .neoh_fn_button:last").css({'padding-left':43+$(".rtBtn .neoh_fn_button:last .fn__svg").text( Number(Number(coin).toFixed(3)) + ' ' + chain?.symbol ).width()})
	},
	handleNetworkChanged = function(res) {
	},
	// 
	init = function(provider, accounts, key) {
		removeListener()
		window.provider = provider
		window.web3 = new Web3(provider)
		window.goldRush = new window.web3.eth.Contract(goldrushAbi,goldrushAddress);
		window.curWallet = {}
		handleAccountsChanged(accounts)
		sessionStorage.setItem('account', key)
		provider.on('accountsChanged', handleAccountsChanged);
		provider.on('chainChanged', handleChainChanged)
		provider.on('networkChanged', handleNetworkChanged)
		provider.on('disconnect', handleDisconnect)
	},
	removeListener = function() {
		if (!window.provider) { return }
		window.provider.removeListener('disconnect', handleDisconnect)
		window.provider.removeListener('accountsChanged', handleAccountsChanged);
		window.provider.removeListener('chainChanged', handleChainChanged);
		window.provider.removeListener('networkChanged', handleNetworkChanged);
	},
	metamask = {
		func: async ()=> {
			if (window.ethereum && window.ethereum.isMetaMask) {
				try {
					let accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
					init(window.ethereum, accounts, 'metamask')
				} catch (error) {
					alert(error.message)
				}
			}
			else {
				window.open('https://metamask.io/')
			}
		},
		name() {
			if (window.ethereum&&window.ethereum.isMetaMask) {
				return 'Connect Wallet'
			}
			return 'Install Matemask'
		}
	},
	mintCallback = function(error, hash){
		let lookHash = chainConfig[window.curWallet.chainId]?.lookHash
		if (error){
			$("#mint_hash").text(error.message).css({'text-decoration':'none', 'pointer-events':'none'})
		} else {
			$("#mint_hash").text(hash).attr('href', lookHash + hash).css({'text-decoration':'inherit', 'pointer-events':'inherit'})
		}
	};
	window.onload = function() {
		$(".rtBtn .neoh_fn_button:first").click(function() {
			metamask.func()
		})
		// $(".rtBtn .neoh_fn_button:last").click(function() {
		// })
		$("#about .buttons .neoh_fn_button:first").click(function() {
        	// mint nft
			let address = window.curWallet.address
			let [proof, value] = window.curWallet.proofAndValue
			if (value === 0) {
				window.goldRush.methods.freeMint(address, proof.map(p=>"0x"+p.data.toString('hex'))).send({from: address}, mintCallback);
			}
			else {
				window.goldRush.methods.mint(address, proof.map(p=>"0x"+p.data.toString('hex'))).send({from: address, value: value}, mintCallback);
			}
		})
		if (sessionStorage.getItem('account')) {
			sessionStorage.removeItem('account')
			metamask.func()
		}
		else {
			$(".rtBtn .neoh_fn_button:first").addClass('active')
			$(".rtBtn .neoh_fn_button:first .text").text(metamask.name())
		}
	}
</script>
</body>
</html>